<form class="example-form" [formGroup]="formGroup">
  <mat-card class="example-card">
    <mat-card-header>
      <input id="user_photo" type="file" hidden>
      <label mat-card-avatar for="user_photo">
        <img src="assets/favicon.png">
        <div class="hover-icon">
          <mat-icon>edit</mat-icon>
        </div>
      </label>
      <mat-card-title>Mumina Solieva</mat-card-title>
      <mat-card-title class="card-right">
        <button [color]="!isReadOnly() ? 'primary': ''" mat-mini-fab [disableRipple]="true" (click)="isReadOnly.set(!isReadOnly())">
          <mat-icon>edit</mat-icon>
        </button> 
      </mat-card-title>
      <mat-card-subtitle>
        ID: a562swd2ql109 
        <button
            [disableRipple]="true"
            mat-icon-button
            class="copy-button"
            [cdkCopyToClipboard]="'Hello World !'">
            <mat-icon>content_copy</mat-icon>
        </button>
    </mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <div>
        <mat-form-field class="example-full-width">
          <mat-label>First name</mat-label>
          <input [readonly]="isReadOnly()" matInput formControlName="firstName" required />
          @if (formGroup.controls['firstName'].hasError('required')) {
            <mat-error
              >first name is
              <strong>required</strong>
            </mat-error>
          }
        </mat-form-field>
        <mat-form-field class="example-full-width">
          <mat-label>Last Name</mat-label>
          <input matInput formControlName="lastName" [readonly]="isReadOnly()" required />
            @if (formGroup.controls['lastName'].hasError('required')) {
              <mat-error
                >last name is
                <strong>required</strong>
              </mat-error>
            }
        </mat-form-field>
      </div>
      <div>
        <mat-form-field class="email-field">
          <mat-label>Email</mat-label>
          <input
            matInput 
            [readonly]="isReadOnly()"
            type="email"
            formControlName="email"
            list="emailTypes"
            required
            (input)="onEmailInput()"
            placeholder="example@gmail.com" />
              @if (formGroup.controls['email'].hasError('required')) {
                <mat-error
                  >email name is
                  <strong>required</strong>
                </mat-error>
              }
              @if (formGroup.controls['email'].hasError('email')) {
                <mat-error>incorrect syntax
                  <strong>email</strong>
                </mat-error>
              }
        </mat-form-field>
      </div>
  <p>
    <mat-form-field class="example-full-width">
      <mat-label>Description</mat-label>
      <textarea [readonly]="isReadOnly()" matInput formControlName="description" placeholder="Write about youself"></textarea
      >
    </mat-form-field>
    </p>
      <mat-divider></mat-divider>
    </mat-card-content>
    <mat-card-actions>
      <button mat-icon-button type="submit" [disabled]="!isFormChanges() || formGroup.invalid" [disableRipple]="true" color="primary"><mat-icon>save</mat-icon></button>
      <button mat-icon-button color="warn" [disableRipple]="true"><mat-icon>delete</mat-icon></button>
    </mat-card-actions>
    <mat-card-footer>
      <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    </mat-card-footer>
  </mat-card>
</form>


<datalist id="emailTypes">
  @for (email of emailTypes(); track email.name) {
    <option [value]="emailField()[0] + email.value">{{ email.name }}</option>
  }
</datalist>